
{% load templatetag_handlebars %}
    {% tplhandlebars "preload_initial_thread_display" %}
    <div id="thread_{{ thread_id }}">
    </div>
    {% endtplhandlebars %}
    {% tplhandlebars "initial_thread_display" %}

    <div id="thread_{{ thread_id }}">
        <div class="yarn-artifacts" id="artifact_container_{{thread_id}}">
        <ul id="yarn_artifact_list_{{thread_id}}">
        {{#each artifacts}}
            {{{ artifact }}}
        {{/each}}
        </ul>
        </div>
        <div class="channel_input">
            <div class="channel-topic"><strong>Current topic:</strong> {{ topic }}</div>
            <div class="channel-sub-actions">
                <input type="file" class="artifact_upload_chooser" id="artifact_upload_chooser_{{ thread_id }}" onchange="handle_artifact_upload(this.files, {{ thread_id }})"/>
                <a href="javascript:void(0);" class="artifact_upload_interface" rel="{{thread_id}}">UP</a>
            </div>
            <div class="channel-textarea" id="artifact_text_input_{{thread_id}}">
                <p class="offscreen">Type your message and hit enter to post.</p>
                <textarea class="thread-text-input-{{ thread_id }}" ></textarea>
            </div>
            <div class="channel-upload" id="artifact_upload_preview_{{thread_id}}" style="display: none;">
                <div style="float: left;">
                    <strong>Preview your files before posting:</strong>
                    <br />
                    <a href="javascript:void(0);" class="upload_artifact" rel="{{thread_id}}">Post</a>
                    <a href="javascript:void(0);" class="cancel_upload_artifact" rel="{{thread_id}}">Cancel</a>
                </div>
                <div style="float: left;" class="upload_file_info"><span id="file_upload_name_{{thread_id}}"></span><br/><img id="upload_image_preview_{{thread_id}}" style="display: none;"></div>
                <br clear="both"/>
            </div>
            <div class="channel-upload" id="artifact_uploading_{{thread_id}}" style="display: none;">
                Uploading...
            </div>
        </div>
        <div class="yarn-sidebar">
            <div class="yarn-sidebar-actions">
                <a style="top:0; right:0;" href="javascript:void(0)" rel="{{thread_id}}" class="thread-security thread-public" title="This thread is public.">Change security settings</a>
                <a style="top:31px; right:0;" href="javascript:void(0)" class="thread-history" title="View thread history" rel="{{thread_id}}">View thread history</a>
                <a style="top: 62px; right: 0" href="javascript:void(0)" class="thread-delete" title="Delete this thread." rel="{{thread_id}}">Delete thread</a>
            </div>
            <div class="yarn-sidebar-thread-meta">
                <h1 class="thread_name_panel">{{thread.name}}</h1>
                <span>
                    <strong>Current topic:</strong>
                </span>
                <p class="thread_topic_panel">{{topic}}</p>
            </div>
            <div id="online_user_list_{{thread_id}}">
                <div class="yarn-sidebar-user-list">
                    <ul>
                        {{#each online_users}}
                        <li>
                            {{{user}}}
                        </li>
                        {{/each}}
                    </ul>
                </div>
            </div>
        </div>
    </div>


{% endtplhandlebars %}
