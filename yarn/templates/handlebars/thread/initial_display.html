
{% load templatetag_handlebars %}
    {% tplhandlebars "preload_initial_thread_display" %}
    <div id="thread_{{ thread_id }}">
    </div>
    {% endtplhandlebars %}
    {% tplhandlebars "artifact_history_display" %}
    <div id="thread_history_artifacts_{{thread_id}}">
        <ul>
            {{#each artifacts}}
                {{{ artifact }}}
            {{/each}}
        </ul>
    </div>
    {% endtplhandlebars %}
    {% tplhandlebars "initial_thread_display" %}

    <div id="thread_{{ thread_id }}">
        <div id="thread_history_{{ thread_id }}" style="display: none;">
            <div class="yarn-history">
                Thread history <a href="javascript:void(0);" rel="{{ thread_id }}" class="close-history">Close</a>
                <div class="yarn-history-thread">
                <div id="thread_history_artifacts_{{thread_id}}"></div>
                </div>
            </div>
            <div class="yarn-sidebar">
                <div id="thread_calendar_{{ thread_id }}">
                </div>
            </div>
        </div>
        <div id="thread_live_{{ thread_id }}">
            <div class="yarn-artifacts" id="artifact_container_{{thread_id}}">
            <ul id="yarn_artifact_list_{{thread_id}}">
            {{#each artifacts}}
                {{{ artifact }}}
            {{/each}}
            </ul>
            </div>
            <div class="channel_input">
                <div class="channel-topic"><strong>Current topic:</strong><span class="thread_topic_{{thread_id}}">{{ topic }}</span></div>
                <div class="channel-sub-actions">
                    <input type="file" class="artifact_upload_chooser" id="artifact_upload_chooser_{{ thread_id }}" onchange="handle_artifact_upload(this.files, {{ thread_id }})"/>
                    <a href="javascript:void(0);" class="artifact_upload_interface" rel="{{thread_id}}">UP</a>
                    <br />
                    <div class="open_help_icon">HP
                        <div class="formatting_help_text">
                            <div class="formatting_background">
                                <div class="commands-container">
                                <h3>Text commands</h3>
                                <dl>
                                    <dt><strong>/topic <em>new text</em></strong></dt>
                                    <dd>changes the discussion topic</dd>
                                    <dt><strong>/me <em>status text</em></strong></dt>
                                    <dd>posts a status</dd>
                                    <dt><strong>/pm <em>@username</em></strong></dt>
                                    <dd>opens a private message thread with that person</dd>
                                    <dt><strong>@username</strong></dt>
                                    <dd>sends a direct message to that person within the current thread (visible to everyone)</dd>
                                    <dt><strong>/invite <em>@username</em> to <em>#threadname</em></strong></dt>
                                    <dd>sends a message inviting that person to the thread</dd>
                                </dl>
                                </div>
                                <div class="formatting-container">
                                <h3>Formatting</h3>
                                <dl>
                                    <dt><strong>*bold text*</strong></dt>
                                    <dt><em>_italic text_</em></dt>
                                    <dt><strong><em>_*bold and italic text*_</em></strong></dt>
                                    <dt><strong><em>#threadname</em></strong></dt>
                                    <dd>creates link to the thread</dd>
                                    <dt>http://www....</dt>
                                    <dd>URLs will automatically be clickable when posted</dd>
                                </dl>
                                </div>
                                <br clear="both"/>
                            </div>
                            <span class="yarn-help-popin-arrow"><img src="static/images/triangle.png" /></span>
                        </div>
                    </div>
                </div>
                <div class="channel-textarea" id="artifact_text_input_{{thread_id}}">
                    <p class="offscreen">Type your message and hit enter to post.</p>
                    <textarea class="thread-text-input-{{ thread_id }}" ></textarea>
                </div>
                <div class="channel-upload" id="artifact_upload_preview_{{thread_id}}" style="display: none;">
                    <div style="float: left;">
                        <strong>Preview your files before posting:</strong>
                        <br />
                        <a href="javascript:void(0);" class="upload_artifact" rel="{{thread_id}}">Post</a>
                        <a href="javascript:void(0);" class="cancel_upload_artifact" rel="{{thread_id}}">Cancel</a>
                    </div>
                    <div style="float: left;" class="upload_file_info"><span id="file_upload_name_{{thread_id}}"></span><br/><img id="upload_image_preview_{{thread_id}}" style="display: none;"></div>
                    <br clear="both"/>
                </div>
                <div class="channel-upload" id="artifact_uploading_{{thread_id}}" style="display: none;">
                    Uploading...
                </div>
            </div>
            <div class="yarn-sidebar">
                <div class="yarn-sidebar-actions">
                    <a style="top:0; right:0;" href="javascript:void(0)" rel="{{thread_id}}" class="thread-security thread-public" title="This thread is public.">Change security settings</a>
                    <a style="top:31px; right:0;" href="javascript:void(0)" class="thread-history" title="View thread history" rel="{{thread_id}}">View thread history</a>
                    <a style="top: 62px; right: 0" href="javascript:void(0)" class="thread-delete" title="Delete this thread." rel="{{thread_id}}">Delete thread</a>
                </div>
                <div class="yarn-sidebar-thread-meta">
                    <h1 class="thread_name_panel thread_id_{{ thread_id }}"><span class="thread_name_display_{{ thread_id }} content">{{thread.name}}</span></h1>
                    <span>
                        <strong>Current topic:</strong>
                    </span>
                    <div class="thread_topic_panel thread_id_{{ thread_id }}">
                    <span class="thread_topic_{{thread_id}} content">{{topic}}</span>
                    </div>

                    <br />
                    <span>
                        <strong>Thread Managers:</strong>
                    <span>
                    <div class="thread_managers_panel">
                    <span class="content">
                    {{#each thread.managers}}
                        {{ login_name }}
                    {{/each}}
                    </span>
                    </div>
                </div>
                <div id="online_user_list_{{thread_id}}">
                    {{{ online_users }}}
                </div>
            </div>
        </div>
    </div>


{% endtplhandlebars %}
